---
title: "Interpolating"
author: "Steffi LaZerte"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Vignette Title}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

## Packages
You'll need several packages from the *tidyverse* in addition to *weathercan* to complete the following analysis.
```{R pck}
library(weathercan)
library(tibble)
library(knitr)
```

### Interpolate and add data
You can merge weather data with other data frames by linearly interprolating between points.

For example, using the included datasets:

```{r}
glimpse(kamloops)
glimpse(finches)

finches_temperature <- add_weather(data = finches, weather = kamloops, cols = "temp")
summary(finches_temperature)
glimpse(finches_temperature)
```

By default, gaps of 2 hours (or two days, with a daily scale) will be interpolated over, but longer gaps will be filled with NAs. You can adjust this behaviour with `na_gap`. Note that as environment canada data is downloaded on an hourly scale, it makes no sense to apply `na_gap` values of less than 1.

```{r}
finches_temperature <- add_weather(data = finches, weather = kamloops, cols = "temp", na_gap = 1)
summary(finches_temperature)

finches_temperature[is.na(finches_temperature$temp),][1:10,]
kamloops[is.na(kamloops$temp), c("time", "temp")]
```
